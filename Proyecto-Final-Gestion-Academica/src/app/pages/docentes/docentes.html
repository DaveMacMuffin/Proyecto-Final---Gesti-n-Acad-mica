<div class="flex flex-col min-h-screen">
    <app-navbar></app-navbar>
    <div class="flex flex-1">
        <app-sidebar></app-sidebar>
        <main class="flex-1 p-6 bg-background">
            <div class="docentes-wrapper">

                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-3xl font-bold text-foreground mb-2">Tablero de Docentes</h1>
                        <p class="text-muted-foreground">
                            Gestión y visualización de la base de datos docente
                        </p>
                    </div>
                    <button data-toggle="modal" data-target="#modalAgregarDocente"
                        class="btn-docente btn btn-secondary ">
                        <i class="fa-solid fa-plus"></i>
                        Agregar Docente
                    </button>
                </div>

                <div class="flex gap-4">
                    <div class="relative docentes-search-container">
                        <input
                            placeholder="Buscar docente por nombre, área, grado, SNI o status..."
                            [(ngModel)]="terminoBusqueda"
                            (input)="searchFilter()"
                            class="docentes-search-input"
                        />
                    </div>
                    <button class="border border-border py-2 px-4 rounded flex items-center gap-2"
                        (click)="exportarCSV()">
                        <i class="fa-solid fa-file-export"></i>
                        Exportar
                    </button>
                </div>

                <div class="bg-card rounded-lg shadow-sm">
                    <div class="p-6 border-b border-border">
                        <h3 class="text-lg font-semibold">Lista de Docentes</h3>
                    </div>
                    <div class="p-6">
                        <table class="docentes-table">
                            <thead>
                                <tr class="docentes-header-row">
                                    <th class="docentes-th">ID</th>
                                    <th class="docentes-th">Nombre</th>
                                    <th class="docentes-th">Área</th>
                                    <th class="docentes-th">Grado</th>
                                    <th class="docentes-th">Idioma</th>
                                    <th class="docentes-th">SNI</th>
                                    <th class="docentes-th">Status</th>
                                    <th class="docentes-th text-right">Editar</th>
                                    <th class="docentes-th text-right">Eliminar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr
                                    *ngFor="let docente of docentesFiltrados; let i = index"
                                    class="docentes-row"
                                >
                                    <td class="docentes-td">{{ i + 1 }}</td> <!-- Número de fila: 1,2,3... -->
                                    <td class="docentes-td">{{docente.nombre}}</td>
                                    <td class="docentes-td">{{docente.academia}}</td>
                                    <td class="docentes-td">{{docente.grado}}</td>
                                    <td class="docentes-td">{{ docente.idioma }}</td>
                                    <td class="docentes-td">
                                        <span
                                            class="badge-base"
                                            [ngClass]="docente.sni !== 'N/A'
                                                ? 'badge-sni'
                                                : 'badge-sni-na'"
                                        >
                                            {{docente.sni}}
                                        </span>
                                    </td>
                                    <td class="docentes-td">
                                        <span
                                            class="badge-base"
                                            [ngClass]="docente.status === 'Activo'
                                                ? 'badge-status-activo'
                                                : 'badge-status-inactivo'"
                                        >
                                            {{docente.status}}
                                        </span>
                                    </td>
                                    <td class="docentes-td text-right">
                                        <button
                                            data-toggle="modal"
                                            data-target="#modalEditarDocente"
                                            (click)="abrirModalEditar(docente)"
                                            class="btn-inline-icon"
                                        >
                                            <i class="fa-solid fa-pen-to-square"></i>
                                        </button>
                                    </td>
                                    <td class="docentes-td text-center">
                                        <button
                                            class="btn btn-danger btn-inline-icon"
                                            (click)="eliminarRegistro(i, docente)"
                                        >
                                            <img src="\img\icons8-basura-24.png" alt="Eliminar">
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="modalAgregarDocente" tabindex="-1" role="dialog" aria-labelledby="modalAgregarDocente"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalAgregarDocente">Añadir docente</h5>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Nombre</label>
                        <input class="form-control" name="nombre" [(ngModel)]="nuevoDocente.nombre"
                            placeholder="Ingrese el nombre del docente">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Correo</label>
                        <input class="form-control" name="correo" [(ngModel)]="nuevoDocente.correo"
                            placeholder="Ingrese el correo del docente">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Academia</label>
                        <input class="form-control" name="academia" [(ngModel)]="nuevoDocente.academia"
                            placeholder="Ingrese la academia del docente">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Grado</label>
                        <select class="form-select" name="grado" [(ngModel)]="nuevoDocente.grado">
                            <option value="Maestría">Maestría</option>
                            <option value="Licenciatura">Licenciatura</option>
                            <option value="Doctorado">Doctorado</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Idioma</label>
                        <input class="form-control" name="idioma" [(ngModel)]="nuevoDocente.idioma"
                            placeholder="Ingrese el idioma del docente">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">SNI</label>
                        <select class="form-select" name="sni" [(ngModel)]="nuevoDocente.sni">
                            <option value="Nivel I">Nivel I</option>
                            <option value="Nivel II">Nivel II</option>
                            <option value="Nivel III">Nivel III</option>
                            <option value="Sin SNI">Sin SNI</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Status</label>
                        <select class="form-select" name="status" [(ngModel)]="nuevoDocente.status">
                            <option value="Activo">Activo</option>
                            <option value="Inactivo">Inactivo</option>
                        </select>
                    </div>


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn-docente btn btn-secondary" (click)="guardarDocente()"> Save changes</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="modalEditarDocente" tabindex="-1" role="dialog" aria-labelledby="modalEditarDocente"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalEditarDocente">Editar docente</h5>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Nombre</label>
                        <input class="form-control" name="nombre" [(ngModel)]="docenteEditar.nombre"
                            placeholder="Ingrese el nombre del docente">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Correo</label>
                        <input class="form-control" name="correo" [(ngModel)]="docenteEditar.correo"
                            placeholder="Ingrese el correo del docente">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Academia</label>
                        <input class="form-control" name="academia" [(ngModel)]="docenteEditar.academia"
                            placeholder="Ingrese la academia del docente">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Grado</label>
                        <select class="form-select" name="grado" [(ngModel)]="docenteEditar.grado">
                            <option value="Maestría">Maestría</option>
                            <option value="Licenciatura">Licenciatura</option>
                            <option value="Doctorado">Doctorado</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Idioma</label>
                        <input class="form-control" name="idioma" [(ngModel)]="docenteEditar.idioma"
                            placeholder="Ingrese el idioma del docente">
                    </div>

                    <div class="mb-3">
                        <label class="form-label">SNI</label>
                        <select class="form-select" name="sni" [(ngModel)]="docenteEditar.sni">
                            <option value="Nivel I">Nivel I</option>
                            <option value="Nivel II">Nivel II</option>
                            <option value="Nivel III">Nivel III</option>
                            <option value="Sin SNI">Sin SNI</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Status</label>
                        <select class="form-select" name="status" [(ngModel)]="docenteEditar.status">
                            <option value="Activo">Activo</option>
                            <option value="Inactivo">Inactivo</option>
                        </select>
                    </div>


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn-docente btn btn-secondary" (click)="actualizarDocente()"> Save changes</button>
                </div>
            </div>
        </div>
    </div>
    <app-footer></app-footer>
</div>
